!function(a,b){"use strict";var c,d,e=b(a),f=!1,g=[],h=[],i={timeout:100,buffer:50,loadingClass:"lazy-loading",srcName:"lazy-src"},j={_init:function(){c=this},listen:function(a,d,e){var j,k=b(a||"img["+i.srcName+"]"),l=d||"image";e&&(j=h.push(e)-1),k.each(function(){var a=b(this);g.push({type:l,obj:a,callback:e?h[j]:null}),a.addClass(i.loadingClass)}),f||c._bindScroll(),c.detect()},_bindScroll:function(){e.bind("scroll.lazyelem",function(){d=setTimeout(function(){c.detect()},i.timeout)}),f=!0},detect:function(){for(var a=0;a<g.length;a++){var b=g[a],d=b.obj;if(!d.is(":hidden")&&c._isInScreen(d)){switch(b.type){case"function":break;case"image":d.attr("src",d.attr(i.srcName)).removeAttr(i.srcName);break;case"dom":var f=d.children("script");f.replaceWith(c._minHtml(f.html()))}b.callback&&b.callback(d),d.removeClass(i.loadingClass),g.splice(a--,1)}}0===g.length&&e.unbind("scroll.lazyelem")},_isInScreen:function(a){var b=e.height(),c=e.scrollTop(),d=a.height(),f=a.offset().top;return f+d>c-i.buffer&&f<c+b+i.buffer},_minHtml:function(a){var b=/\n+/g,c=/<!--.*?-->/gi,d=/\/\*.*?\*\//gi,e=/[ ]+</gi;return a=a.replace(b,""),a=a.replace(c,""),a=a.replace(d,""),a=a.replace(e,"<")},config:function(a){b.extend(i,a)}};j._init(),a.lazyelem=j}(window,jQuery);